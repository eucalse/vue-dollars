webpackJsonp([1],{H5ec:function(e,s){},NHnr:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n=t("7+uW"),a={render:function(){var e=this.$createElement,s=this._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},staticRenderFns:[]};var i=t("VU/8")({name:"app"},a,!1,function(e){t("H5ec")},null,null).exports,o=t("/ocq"),r={name:"loginPage",data:function(){return{username:"",userIcon:0}},methods:{login:function(){this.username.trim()?(this.userIcon=Math.floor(9*Math.random()),sessionStorage.setItem("username",this.username),sessionStorage.setItem("userIcon",this.userIcon),this.$router.push("/chatting")):alert("请输入用户名")}},mounted:function(){this.$refs.submit.addEventListener("click",this.login)}},c={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{attrs:{id:"loginPage"}},[t("div",{staticClass:"dollars-login"},[e._m(0),e._v(" "),t("div",{staticClass:"dollars-user"},[e._m(1),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"username-input",attrs:{type:"text"},domProps:{value:e.username},on:{keyup:function(s){if(!("button"in s)&&e._k(s.keyCode,"enter",13,s.key,"Enter"))return null;e.login()},input:function(s){s.target.composing||(e.username=s.target.value)}}}),e._v(" "),t("button",{ref:"submit",staticClass:"login-button",attrs:{type:"button"}},[t("strong",{staticStyle:{color:"white"}},[e._v("ENTER")])])])])])},staticRenderFns:[function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"main-img"},[s("img",{staticStyle:{select:"none"},attrs:{src:t("OMbi"),draggable:"false"}})])},function(){var e=this.$createElement,s=this._self._c||e;return s("span",[s("strong",{staticStyle:{color:"white"}},[this._v("USERNAME:")])])}]};var u=t("VU/8")(r,c,!1,function(e){t("OWu7")},null,null).exports,l=t("WYiT"),m=t.n(l),g={data:function(){return{username:"",userIcon:0,postMessage:"",messages:[],iconGroup:m.a.images,showDelay:!0,socket:"",connecters:[]}},computed:{},methods:{userImage:function(e){var s=e.userIcon;if(s||0===s)return m.a.images[s].src},userMessage:function(e,s){var t=void 0;return e.user&&(t="user-message"),t},animateBounceIn:function(){this.$refs.dialogItem.children},changeShow:function(){this.showDelay=!0},logout:function(){this.socket.emit("logout",{username:this.username}),sessionStorage.removeItem("username"),sessionStorage.removeItem("userIcon")},sendMessage:function(){var e={user:this.username,message:this.postMessage,userIcon:this.userIcon};this.socket.emit("newMessage",e),this.postMessage=""},socketIo:function(){var e=this;this.socket=io.connect("ws://127.0.0.1:3000/"),this.username&&this.socket.emit("login",{username:this.username,userIcon:this.userIcon}),this.socket.on("connectStatus",function(e){console.log(e)}),this.socket.on("getMessage",function(s){"string"==typeof s?e.messages.unshift({message:">>>"+s}):e.messages.unshift(s)}),this.$refs.post.addEventListener("click",this.sendMessage),this.socket.on("connecter",function(s){e.connecters=s})}},created:function(){},mounted:function(){var e=this;this.username=sessionStorage.username,this.userIcon=sessionStorage.userIcon,this.socketIo(),sessionStorage.username||this.$router.push("/"),window.addEventListener("beforeunload",function(){e.logout()})},watch:{messages:function(){this.showDelay=!1;setTimeout(this.changeShow,50)}},destroyed:function(){this.logout()}},p={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{attrs:{id:"chatting"}},[t("div",{staticClass:"chatting-area"},[t("div",{staticClass:"post"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.postMessage,expression:"postMessage"}],staticClass:"postBlank",attrs:{placeholder:"Type in here"},domProps:{value:e.postMessage},on:{keyup:function(s){if(!("button"in s)&&e._k(s.keyCode,"enter",13,s.key,"Enter"))return null;e.sendMessage()},input:function(s){s.target.composing||(e.postMessage=s.target.value)}}}),e._v(" "),t("button",{ref:"post"},[t("strong",[e._v("POST")])])]),e._v(" "),t("div",{staticClass:"dialog-group"},[t("ul",{ref:"dialogItem",staticClass:"dialog-item"},e._l(e.messages,function(s,n){return t("li",{key:n,staticClass:"message"},[t("span",{directives:[{name:"show",rawName:"v-show",value:s.user,expression:"message.user"}],staticClass:"user-info",attrs:{id:"user-info"}},[t("div",{staticClass:"userIcon"},[t("img",{attrs:{src:e.userImage(s)}})]),e._v(" "),t("label",{staticClass:"user-name",attrs:{for:"user-info"}},[e._v(e._s(s.user))])]),e._v(" "),t("transition",{attrs:{name:"bounce"}},[0!=n||e.showDelay||!s.user?t("span",{class:e.userMessage(s,n)},[t("strong",[e._v(e._s(s.message))])]):e._e()])],1)}))])]),e._v(" "),t("div",{staticClass:"chatting-config"},[t("ul",{staticClass:"icon-select"},e._l(e.iconGroup,function(s,n){return t("li",{key:n,on:{click:function(s){e.userIcon=n}}},[t("div",{staticClass:"icon-container"},[t("img",{attrs:{src:s.src}})])])})),e._v(" "),t("ul",{staticClass:"connecters"},e._l(e.connecters,function(s,n){return t("li",{key:n},[t("span",{staticClass:"user-info",attrs:{id:"user-info"}},[t("div",{staticClass:"userIcon"},[t("img",{attrs:{src:e.userImage(s)}})]),e._v(" "),t("label",{staticClass:"user-name",attrs:{for:"user-info"}},[e._v(e._s(s.user))])])])}))])])},staticRenderFns:[]};var f=t("VU/8")(g,p,!1,function(e){t("faF2")},null,null).exports;n.a.use(o.a);var h=new o.a({routes:[{path:"/",component:u,name:"loginPage"},{path:"/chatting",component:f,name:"chatting"}]}),d=t("mtWM"),v=t.n(d),_=t("NYxO");n.a.use(_.a);var I=new _.a.Store({state:{username:""},mutations:{userLogin:function(e,s){e.username=s}}}),k=t("oPmM"),w=t.n(k);n.a.use(w.a),n.a.prototype.$axios=v.a,n.a.config.productionTip=!1,new n.a({el:"#app",router:h,store:I,components:{App:i},template:"<App/>"})},OMbi:function(e,s,t){e.exports=t.p+"static/img/dollars.ee794b8.png"},OWu7:function(e,s){},WYiT:function(e,s){e.exports={images:[{src:"/static/icon_1.png"},{src:"/static/icon_2.png"},{src:"/static/icon_3.png"},{src:"/static/icon_4.png"},{src:"/static/icon_5.png"},{src:"/static/icon_6.png"},{src:"/static/icon_7.png"},{src:"/static/icon_8.png"},{src:"/static/icon_9.png"}]}},faF2:function(e,s){},oPmM:function(e,s){}},["NHnr"]);
//# sourceMappingURL=app.f1fca25712227f02831c.js.map